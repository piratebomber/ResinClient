/*
  Resin CSS â€” minimal, production-minded base styles.
  Notes:
  - Avoids layout thrash by using transform-based animations (where relevant).
  - Uses system-safe font stack with Inter as a progressive enhancement.
  - Full-viewport canvas with overlays for menu and HUD.
*/

:root {
  --bg: #0e0e11;
  --panel: #17171c;
  --accent: #4bd7a8;
  --accent-2: #9bf6c7;
  --text: #e9e9ee;
  --text-dim: #b6b6c2;
  --danger: #ff6b6b;
  --grid: #1d1d22;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font: 14px/1.4 "Inter", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  overflow: hidden; /* prevent page scroll; the game manages panning */
}

.fatal { padding: 1rem; background: var(--danger); color: #000; }

#app { position: relative; width: 100vw; height: 100vh; }
#resin-canvas { width: 100%; height: 100%; display: block; background: #0b0b0e; outline: none; }

.overlay { position: absolute; inset: 0; pointer-events: none; }
.overlay.visible { pointer-events: auto; }

/* Centered panel for the main menu */
#menu-overlay { display: grid; place-items: center; }
#menu-overlay .panel {
  min-width: 360px;
  background: var(--panel);
  border: 1px solid #25252c;
  border-radius: 10px;
  padding: 20px 22px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
}
#menu-overlay h1 { margin: 0 0 6px; font-size: 32px; letter-spacing: 0.5px; }
#menu-overlay .subtitle { margin: 0 0 16px; color: var(--text-dim); }
#menu-overlay .controls { display: flex; gap: 10px; margin: 10px 0 8px; }
button { 
  appearance: none; border: 1px solid #2b2b33; background: #111116; color: var(--text);
  padding: 10px 14px; border-radius: 8px; cursor: pointer; font-weight: 600;
}
button.primary { background: linear-gradient(180deg, var(--accent-2), var(--accent)); color: #07120f; border: none; }
button:disabled { opacity: 0.6; cursor: not-allowed; }
.hint { color: var(--text-dim); margin: 8px 0 0; }

/* HUD overlay */
#hud-overlay { pointer-events: none; display: grid; grid-template-rows: auto 1fr auto; }
#hud-overlay .bar { background: rgba(0,0,0,0.35); padding: 6px 10px; }
#hud-top { display: flex; gap: 12px; }
#hud-bottom { display: flex; gap: 12px; justify-content: center; align-items: center; padding-bottom: 8px; }
.block-palette { display: flex; gap: 8px; }
.block {
  width: 24px; height: 24px; border: 2px solid #000; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.25);
}
.block.selected { outline: 2px solid var(--accent); outline-offset: 2px; }

/* 3D HUD: hotbar and crosshair */
#hud3d { position: absolute; inset: 0; pointer-events: none; }
#crosshair { position: absolute; left: 50%; top: 50%; width: 16px; height: 16px; transform: translate(-50%,-50%); }
#crosshair::before, #crosshair::after { content: ""; position: absolute; background: #fff; opacity: 0.9; }
#crosshair::before { left: 7px; top: 0; width: 2px; height: 16px; }
#crosshair::after  { left: 0; top: 7px; width: 16px; height: 2px; }

#hotbar { position: absolute; left: 50%; bottom: 24px; transform: translateX(-50%); display: grid; grid-template-columns: repeat(9, 42px); gap: 8px; }
.hotbar-slot { position: relative; width: 42px; height: 42px; background: rgba(0,0,0,0.5); border: 2px solid #333; border-radius: 6px; display: grid; place-items: center; color: #fff; font-weight: 700; overflow: hidden; }
.hotbar-slot.selected { border-color: var(--accent); box-shadow: 0 0 8px rgba(75,215,168,0.6); }
.hotbar-count { position: absolute; right: 4px; bottom: 0; font-size: 12px; color: #fff; text-shadow: 0 1px 2px #000; }
.hotbar-slot img.icon { width: 28px; height: 28px; image-rendering: pixelated; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.6)); }

/* Inventory panel */
#inventory-panel { position: absolute; inset: 0; display: none; align-items: center; justify-content: center; pointer-events: auto; }
#inventory-panel.visible { display: flex; }
#inventory-panel .panel { background: var(--panel); border: 1px solid #25252c; border-radius: 10px; padding: 16px; min-width: 420px; }
#inventory-grid { display: grid; grid-template-columns: repeat(9, 48px); gap: 8px; }
.inv-slot { width: 48px; height: 48px; background: #0b0b0e; border: 2px solid #333; border-radius: 6px; position: relative; display: grid; place-items: center; color: #fff; }
.inv-count { position: absolute; right: 4px; bottom: 0; font-size: 12px; }

/* Chat UI */
#chat { position: absolute; left: 12px; bottom: 12px; width: 340px; pointer-events: none; }
#chat-log { max-height: 160px; overflow-y: auto; font-size: 12px; color: #fff; text-shadow: 0 1px 2px #000; }
#chat-input { margin-top: 6px; display: none; }
#chat-input input { width: 100%; padding: 6px 8px; border-radius: 6px; border: 1px solid #333; background: rgba(0,0,0,0.6); color: #fff; }
#chat-input.visible { display: block; pointer-events: auto; }

/* Player list */
#player-list { position: absolute; right: 12px; top: 12px; background: rgba(0,0,0,0.4); padding: 8px 10px; border-radius: 8px; color: #fff; }

/* Optional grid background cue for the canvas area */
#app::before {
  content: "";
  position: absolute; inset: 0; pointer-events: none;
  background-image: linear-gradient(var(--grid) 1px, transparent 1px), linear-gradient(90deg, var(--grid) 1px, transparent 1px);
  background-size: 16px 16px, 16px 16px;
  opacity: 0.25;
}
